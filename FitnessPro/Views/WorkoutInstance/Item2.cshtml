<div id="workoutInstanceDetailsItem" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Workout plan details</h4>
            </div>
            <div class="modal-body">
                <p>Name: <strong data-bind="text: WorkoutName"></strong></p>
                @*<input id="Date" type="date" class="form-control" data-bind="value: Date">*@
                <input id="Date" type="date" class="form-control" data-bind="datePicker : Date" /> 
                <p>Rounds: <input type="number" class="form-control" data-bind="value: Rounds"/></p>
                <label for="Exercises">Exercises</label>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Exercise name</th>
                            <th>Number of repetitions planned</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach:WorkoutInstanceExercises">
                        <tr>
                            <td class="col-xs-5" data-bind="text:ExerciseName"></td>
                            <td><input type="number" class="form-control" data-bind="value: PlannedRepetitions" /></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal" data-bind="click:save">Save</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script>
    
    ko.bindingHandlers.datePicker = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            // Register change callbacks to update the model
            // if the control changes.
            ko.utils.registerEventHandler(element, "change", function () {
                var value = valueAccessor();
                value(moment(element.value).format());
            });
        },
        // Update the control whenever the view model changes
        update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var value = valueAccessor();
            element.value = moment(value()).format("YYYY-MM-DD");
        }
    };

    </script>
